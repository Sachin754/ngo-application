{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OutgoingClientScope = exports.IncomingClientScope = exports.EventStreamScope = void 0;\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst querystring_1 = __importDefault(require(\"querystring\"));\n/**\n * @param filters\n */\nclass EventStreamScope {\n  constructor(filters) {\n    this.scope = \"scope:stream:subscribe\";\n    this.filters = filters || {};\n  }\n  payload() {\n    var queryArgs = [\"path=/2010-04-01/Events\"];\n    if (Object.keys(this.filters).length > 0) {\n      var queryParams = Object.entries(this.filters).map(filter => {\n        return [querystring_1.default.escape(filter[0]), querystring_1.default.escape(filter[1])].join(\"=\");\n      });\n      var filterParams = queryParams.join(\"&\");\n      queryArgs.push([\"appParams\", querystring_1.default.escape(filterParams)].join(\"=\"));\n    }\n    var queryString = queryArgs.join(\"&\");\n    return [this.scope, queryString].join(\"?\");\n  }\n}\nexports.EventStreamScope = EventStreamScope;\n/**\n * @param clientName\n */\nclass IncomingClientScope {\n  constructor(clientName) {\n    this.scope = \"scope:client:incoming\";\n    this.clientName = clientName;\n  }\n  payload() {\n    var query = [\"clientName\", querystring_1.default.escape(this.clientName)].join(\"=\");\n    return [this.scope, query].join(\"?\");\n  }\n}\nexports.IncomingClientScope = IncomingClientScope;\nclass OutgoingClientScope {\n  /**\n   * @param options - ...\n   * @param options.applicationSid - the application sid\n   * @param options.clientName - the client name\n   * @param options.params - parameters\n   */\n  constructor(options) {\n    this.scope = \"scope:client:outgoing\";\n    if (!options) {\n      throw new Error('Required parameter \"options\" missing.');\n    }\n    if (typeof options !== \"object\") {\n      throw new TypeError('Parameter \"options\" must be a type Object');\n    }\n    if (!options.applicationSid) {\n      throw new Error('Required parameter \"options.applicationSid\" missing.');\n    }\n    this.applicationSid = options.applicationSid;\n    this.clientName = options.clientName;\n    this.params = options.params;\n  }\n  payload() {\n    var queryArgs = [[\"appSid\", querystring_1.default.escape(this.applicationSid)].join(\"=\")];\n    if (typeof this.clientName === \"string\") {\n      queryArgs.push([\"clientName\", querystring_1.default.escape(this.clientName)].join(\"=\"));\n    }\n    if (typeof this.params === \"object\") {\n      var queryParams = Object.entries(this.params).map(param => {\n        return [querystring_1.default.escape(param[0]), querystring_1.default.escape(param[1])].join(\"=\");\n      });\n      var filterParams = queryParams.join(\"&\");\n      queryArgs.push([\"appParams\", querystring_1.default.escape(filterParams)].join(\"=\"));\n    }\n    var queryString = queryArgs.join(\"&\");\n    return [this.scope, queryString].join(\"?\");\n  }\n}\nexports.OutgoingClientScope = OutgoingClientScope;\n/**\n * @param options\n */\nclass ClientCapability {\n  constructor(options) {\n    if (!options) {\n      throw new Error('Required parameter \"options\" missing.');\n    }\n    if (typeof options !== \"object\") {\n      throw new TypeError('Parameter \"options\" must be a type Object');\n    }\n    if (!options.accountSid) {\n      throw new Error('Required parameter \"options.accountSid\" missing.');\n    }\n    if (!options.authToken) {\n      throw new Error('Required parameter \"options.authToken\" missing.');\n    }\n    this.accountSid = options.accountSid;\n    this.authToken = options.authToken;\n    this.ttl = options.ttl || 3600;\n    this.scopes = [];\n  }\n  addScope(scope) {\n    this.scopes.push(scope);\n  }\n  toJwt() {\n    const scope = this.scopes.map(scope => scope.payload()).join(\" \");\n    var payload = {\n      scope: scope,\n      iss: this.accountSid,\n      exp: Math.floor(new Date().valueOf() / 1000) + this.ttl\n    };\n    return jsonwebtoken_1.default.sign(payload, this.authToken);\n  }\n}\nexports.default = ClientCapability;\nClientCapability.EventStreamScope = EventStreamScope;\nClientCapability.IncomingClientScope = IncomingClientScope;\nClientCapability.OutgoingClientScope = OutgoingClientScope;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","OutgoingClientScope","IncomingClientScope","EventStreamScope","jsonwebtoken_1","require","querystring_1","constructor","filters","scope","payload","queryArgs","keys","length","queryParams","entries","map","filter","default","escape","join","filterParams","push","queryString","clientName","query","options","Error","TypeError","applicationSid","params","param","ClientCapability","accountSid","authToken","ttl","scopes","addScope","toJwt","iss","exp","Math","floor","Date","valueOf","sign"],"sources":["/Users/sachin/Desktop/Assignment/cpf/node_modules/twilio/lib/jwt/ClientCapability.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingClientScope = exports.IncomingClientScope = exports.EventStreamScope = void 0;\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst querystring_1 = __importDefault(require(\"querystring\"));\n/**\n * @param filters\n */\nclass EventStreamScope {\n    constructor(filters) {\n        this.scope = \"scope:stream:subscribe\";\n        this.filters = filters || {};\n    }\n    payload() {\n        var queryArgs = [\"path=/2010-04-01/Events\"];\n        if (Object.keys(this.filters).length > 0) {\n            var queryParams = Object.entries(this.filters).map((filter) => {\n                return [querystring_1.default.escape(filter[0]), querystring_1.default.escape(filter[1])].join(\"=\");\n            });\n            var filterParams = queryParams.join(\"&\");\n            queryArgs.push([\"appParams\", querystring_1.default.escape(filterParams)].join(\"=\"));\n        }\n        var queryString = queryArgs.join(\"&\");\n        return [this.scope, queryString].join(\"?\");\n    }\n}\nexports.EventStreamScope = EventStreamScope;\n/**\n * @param clientName\n */\nclass IncomingClientScope {\n    constructor(clientName) {\n        this.scope = \"scope:client:incoming\";\n        this.clientName = clientName;\n    }\n    payload() {\n        var query = [\"clientName\", querystring_1.default.escape(this.clientName)].join(\"=\");\n        return [this.scope, query].join(\"?\");\n    }\n}\nexports.IncomingClientScope = IncomingClientScope;\nclass OutgoingClientScope {\n    /**\n     * @param options - ...\n     * @param options.applicationSid - the application sid\n     * @param options.clientName - the client name\n     * @param options.params - parameters\n     */\n    constructor(options) {\n        this.scope = \"scope:client:outgoing\";\n        if (!options) {\n            throw new Error('Required parameter \"options\" missing.');\n        }\n        if (typeof options !== \"object\") {\n            throw new TypeError('Parameter \"options\" must be a type Object');\n        }\n        if (!options.applicationSid) {\n            throw new Error('Required parameter \"options.applicationSid\" missing.');\n        }\n        this.applicationSid = options.applicationSid;\n        this.clientName = options.clientName;\n        this.params = options.params;\n    }\n    payload() {\n        var queryArgs = [[\"appSid\", querystring_1.default.escape(this.applicationSid)].join(\"=\")];\n        if (typeof this.clientName === \"string\") {\n            queryArgs.push([\"clientName\", querystring_1.default.escape(this.clientName)].join(\"=\"));\n        }\n        if (typeof this.params === \"object\") {\n            var queryParams = Object.entries(this.params).map((param) => {\n                return [querystring_1.default.escape(param[0]), querystring_1.default.escape(param[1])].join(\"=\");\n            });\n            var filterParams = queryParams.join(\"&\");\n            queryArgs.push([\"appParams\", querystring_1.default.escape(filterParams)].join(\"=\"));\n        }\n        var queryString = queryArgs.join(\"&\");\n        return [this.scope, queryString].join(\"?\");\n    }\n}\nexports.OutgoingClientScope = OutgoingClientScope;\n/**\n * @param options\n */\nclass ClientCapability {\n    constructor(options) {\n        if (!options) {\n            throw new Error('Required parameter \"options\" missing.');\n        }\n        if (typeof options !== \"object\") {\n            throw new TypeError('Parameter \"options\" must be a type Object');\n        }\n        if (!options.accountSid) {\n            throw new Error('Required parameter \"options.accountSid\" missing.');\n        }\n        if (!options.authToken) {\n            throw new Error('Required parameter \"options.authToken\" missing.');\n        }\n        this.accountSid = options.accountSid;\n        this.authToken = options.authToken;\n        this.ttl = options.ttl || 3600;\n        this.scopes = [];\n    }\n    addScope(scope) {\n        this.scopes.push(scope);\n    }\n    toJwt() {\n        const scope = this.scopes.map((scope) => scope.payload()).join(\" \");\n        var payload = {\n            scope: scope,\n            iss: this.accountSid,\n            exp: Math.floor(new Date().valueOf() / 1000) + this.ttl,\n        };\n        return jsonwebtoken_1.default.sign(payload, this.authToken);\n    }\n}\nexports.default = ClientCapability;\nClientCapability.EventStreamScope = EventStreamScope;\nClientCapability.IncomingClientScope = IncomingClientScope;\nClientCapability.OutgoingClientScope = OutgoingClientScope;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}